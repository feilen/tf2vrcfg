// ----------------------------------------------------------------------------
// ---------------------Feilen's TF2 Highquality Script-----------------------
// 
//   Heavily modified based off of Chris' FPS configs Highquality script. 
//   Intended to give a very high quality VR experience, only sacrificing  
//   features that don't look good in VR.
//   Note: If you've used highframes or other Chris' FPS configs in the past,
//   it may be neccesary to go clean out leftover settings from config.cfg
//   (or you'll get graphical glitches, things dissapearing, etc)
// ----------------------------------------------------------------------------
// Reccomended launch options: -novid -h 1080 -w 1920 -freq 75 -full
// ----------------------------------------------------------------------------


// ----------------------------------------------------------------------------
// Graphical
// ----------------------------------------------------------------------------

cl_burninggibs 1
cl_new_impact_effects 1
cl_phys_props_max 1024
cl_ragdoll_collide 1
lod_transitiondist 6400
mat_bumpmap 1
mat_compressedtextures 1
mat_motion_blur_enabled 0 
mat_motion_blur_forward_enabled 0
mat_motion_blur_strength 0
mat_parallaxmap 1
mat_postprocess_x 8
mat_postprocess_y 8
mat_reducefillrate 0
mat_specular 1
mp_decals 512
mp_usehwmmodels 0
mp_usehwmvcds 0
r_avglight 3
r_decals 512
r_lod 0
r_maxmodeldecal 512
r_rootlod 0
r_shadowmaxrendered 1024
r_shadowrendertotexture 1
r_shadows 1

// AA, AF, texture resolution. Uncomment what you want, comment all others.

// AA off
//mat_antialias 1; mat_aaquality 0
//2x FSAA
//mat_antialias 2; mat_aaquality 0
//4x FSAA
//mat_antialias 4; mat_aaquality 0
//8x CSAA
//mat_antialias 4; mat_aaquality 2
//16x CSAA
//mat_antialias 4; mat_aaquality 4
//8x MSAA
//mat_antialias 8; mat_aaquality 0
//16xQ CSAA: reccomended
mat_antialias 8; mat_aaquality 2

//AF, texture quality, disable vsync (awful latency in Source)
mat_forceaniso 16
mat_picmip -1
mat_vsync 0 

// ----------------------------------------------------------------------------
// VR Enhancement
// ----------------------------------------------------------------------------

// Eye distance rendering, don't render detail beyond what's stereoscopic
// DK1 = ( (IPD=68mm) / tan ( 86 degrees / (1280px / 2) )) * 16 
// DK2 = ( (IPD=68mm) / tan ( 84 degrees / (1920px / 2) )) * 16 
// IPD=68mm will cover 95% of men in the US, and a higher percentage of women.
// Use a rough estimate for degrees/px, as cl_detailfade will cover the rest.
// This value gets reset on map change, so we need to put it into char.cfg

// DK2
alias set_rift_detaildist "cl_detaildist 2338"

// DK1 - uncomment if using DK1
//alias set_rift_detaildist "cl_detaildist 1520"

// Water reflection looks terrible in VR for some reason, so save graphics
//     power for antialiasing
r_waterdrawreflection 0
r_waterforceexpensive 0
r_waterforcereflectentities 0
mat_wateroverlaysize 1
r_cheapwaterend 1
r_cheapwaterstart 1

// HDR - Looks bad in VR, undistorted colors are better
mat_hdr_level 0
mat_disable_bloom 1
r_ambientboost 0
r_ambientfactor 0
r_ambientmin 0

// Software AA postprocessing, theoretically very little performance hit
mat_software_aa_quality 2
mat_software_aa_strength 2
mat_software_aa_strength_vgui 2
mat_software_aa_blur_one_pixel_lines 0.5
mat_software_aa_edge_threshold .8

// Reflections, 256x256 is basically the closest you need (as that's 26 degrees)
mat_envmapsize 256
mat_envmaptgasize 256

// Rift is sRGB calibrated, so gamma = 2.2
mat_monitorgamma 2.2

// By default, you only get 10% tracking volume. This fixes that
vr_translation_limit 100

// ----------------------------------------------------------------------------
// Net settings, for good connections.
// ----------------------------------------------------------------------------

cl_cmdrate 66
cl_interp 0.03
cl_interp_ratio 1
cl_lagcompensation 1
cl_pred_optimize 2
cl_smooth 1
cl_smoothtime 0.03
cl_updaterate 66
rate 60000

// ----------------------------------------------------------------------------
// Misc 
// ----------------------------------------------------------------------------
in_usekeyboardsampletime 0
mat_clipz 1 // FX card users should set this to 0
mat_forcehardwaresync 0
mat_levelflush 1
mat_vsync 0
r_fastzreject -1

// ----------------------------------------------------------------------------
// Sound
// ----------------------------------------------------------------------------
dsp_enhance_stereo 1
dsp_slow_cpu 0
snd_async_fullyasync 1
snd_pitchquality 1

// ----------------------------------------------------------------------------
// Threading 
// ----------------------------------------------------------------------------
mat_queue_mode 2
r_threaded_client_shadow_manager 1
r_threaded_particles 1
r_threaded_renderables 1
cl_threaded_client_leaf_system 0
r_queued_post_processing 0

// Possible problems, appears to cause crashes on linux when VR enabled
//cl_threaded_bone_setup 1
//r_queued_decals 1
//r_queued_ropes 1

// ----------------------------------------------------------------------------
// Custom
// ----------------------------------------------------------------------------
glow_outline_effect_enable 0 // Set to 1 to have objectives outlined
